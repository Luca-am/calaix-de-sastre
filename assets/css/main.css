/* === Design tokens (llums: blanc/beix + vermell) === */
:root{
  /* Colors base */
  --bg:#F6F6F6;          /* fons pàgina (blanc fumat) */
  --surface:#FFFFFF;     /* panells i targetes */
  --elev:#FFFFFF;
  --text:#1d1f23;        /* text principal */
  --muted:#60636b;       /* text secundari */
  --border:#E3E4E8;      /* línies i contorns suaus */
  --ring:#ffd8d3;

  /* Escala vermell */
  --red-1:#E7473C;       /* accent principal */
  --red-2:#FF5C4F;       /* hover */
  --red-3:#FF8A80;       /* soft */
  --red-ink:#ffffff;     /* text damunt vermell */

  /* Tocs beix (opc.) */
  --beige:#F0E7DE;       /* zones secundàries subtils */

  /* Layout */
  --max:1040px;
  --radius:18px;
  --radius-sm:12px;
  --gap:20px;
  --section:64px;

  /* Tipografia */
  --f-xs:.88rem; --f-sm:.95rem; --f-base:1.04rem;
  --f-h3:1.25rem; --f-h2:1.9rem; --f-h1:3rem;
}

/* Reset curt */
*{box-sizing:border-box}
html,body{margin:0}
body{
  background:var(--bg);
  color:var(--text);
  font:400 var(--f-base)/1.6 ui-sans-serif, system-ui, Segoe UI, Inter, Roboto, Arial, sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
img{max-width:100%;height:auto;border-radius:var(--radius-sm)}
a{color:var(--red-1);text-decoration:none}
a:hover{color:var(--red-2)}
:focus-visible{outline:2px solid var(--red-3);outline-offset:2px}

/* Shell */
.container{max-width:var(--max);margin:0 auto;padding:26px}
.section{margin:var(--section) auto}

/* Nav */
.nav{
  position:sticky; top:0; z-index:40;
  background:rgba(255,255,255,.86);
  backdrop-filter:saturate(120%) blur(8px);
  border-bottom:1px solid var(--border);
  display:flex;gap:16px;align-items:center;padding:10px 26px;
}
.brand{
  display:inline-flex;align-items:center;gap:10px;padding:6px 12px;
  background:linear-gradient(135deg,var(--red-1),var(--red-3));
  color:var(--red-ink); border-radius:999px; font-weight:800; letter-spacing:.2px;
}
.nav a.link{padding:6px 6px;border-radius:8px;color:var(--text)}
.nav a.link[aria-current="page"]{color:var(--red-1)}
.nav .spacer{flex:1}
.lang a{color:var(--muted);font-size:var(--f-sm)}
.lang a:hover{color:#000}

/* Hero */
.h{padding:48px 0 12px}
.h h1{font-size:var(--f-h1);line-height:1.15;margin:0 0 12px;letter-spacing:.2px}
.h p{color:var(--muted);max-width:72ch;margin:0}

/* About block under hero title */
.about{display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap}
.about img{flex:0 0 220px;max-width:220px;height:auto;border-radius:var(--radius)}
.about .copy{flex:1;min-width:260px}
@media (max-width:640px){.about img{flex-basis:100%;max-width:100%}}

/* Grid + cards */
.grid{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:var(--gap)}
.col-6{grid-column:span 6}
.col-12{grid-column:span 12}
@media (max-width:880px){.col-6{grid-column:span 12}}

/* Default two-column layout for cards inside grids */
.grid > .card{grid-column:span 6}
@media (max-width:880px){.grid > .card{grid-column:span 12}}

.card{
  background:
    linear-gradient(var(--surface),var(--surface)) padding-box,
    linear-gradient(140deg, #fafafa, #fff) border-box;
  border:1px solid var(--border);
  border-radius:var(--radius); padding:18px 18px 16px;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
}
.card--beige{background:var(--beige)}
.card h3{font-size:var(--f-h3);margin:0 0 8px}
.card p{margin:0 0 12px;color:var(--muted)}

.bibliography{display:flex;flex-direction:column;gap:var(--section)}
.bibliography__section{display:flex;flex-direction:column}
.section-header{display:flex;flex-direction:column;gap:6px;margin-bottom:18px}
.section-header h2{margin:0;font-size:var(--f-h2)}
.section-header .meta{margin:0;max-width:60ch}

.carousel{position:relative}
.carousel__viewport{
  display:flex;gap:var(--gap);
  padding:6px 8px 12px;
  margin:0 -8px;
  overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-padding:8px;
  -webkit-overflow-scrolling:touch;
}
.carousel__viewport::-webkit-scrollbar{height:8px}
.carousel__viewport::-webkit-scrollbar-thumb{background:var(--border);border-radius:999px}
.carousel__slide{
  position:relative;
  flex:0 0 clamp(220px,calc(33% - var(--gap)),320px);
  scroll-snap-align:start;
}
.carousel__link{
  position:relative;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  border-radius:var(--radius);
  overflow:hidden;
  isolation:isolate;
}
.carousel__link img{
  display:block;
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:inherit;
  transition:transform .4s ease;
}
.carousel__overlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  padding:18px;
  background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.45) 100%);
  color:#fff;
  opacity:0;
  transition:opacity .3s ease;
}
.carousel__title{font-weight:700;font-size:1rem;margin-bottom:4px}
.carousel__cta{
  align-self:flex-start;
  font-size:.85rem;
  padding:6px 12px;
  border-radius:999px;
  background:rgba(255,255,255,.9);
  color:var(--text);
}
.carousel__link:hover img,
.carousel__link:focus-visible img{
  transform:scale(1.04);
}
.carousel__link:hover .carousel__overlay,
.carousel__link:focus-visible .carousel__overlay{
  opacity:1;
}
@media (max-width:880px){
  .carousel__slide{flex:0 0 calc(100% - 48px)}
}
.carousel__btn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  align-items:center;
  justify-content:center;
  width:42px;
  height:42px;
  border:none;
  border-radius:999px;
  background:rgba(255,255,255,.92);
  box-shadow:0 10px 24px rgba(0,0,0,.12);
  color:var(--text);
  font-size:1.25rem;
  cursor:pointer;
}
.carousel__btn--prev{left:-12px}
.carousel__btn--next{right:-12px}
.carousel__btn[disabled]{
  opacity:.35;
  cursor:not-allowed;
  box-shadow:none;
}
@media (max-width:640px){
  .carousel__btn--prev{left:-4px}
  .carousel__btn--next{right:-4px}
}

/* Buttons */
.btn{
  display:inline-flex;align-items:center;gap:8px;padding:10px 14px;
  border:1px solid var(--border); border-radius:14px; color:var(--text); background:#fff;
  font:500 var(--f-sm)/1.2 ui-sans-serif, system-ui, Segoe UI, Inter, Roboto, Arial, sans-serif;
  cursor:pointer;
}
.btn:hover{border-color:#cfd2d8;background:#fff}
.btn.primary{
  border:none; font-weight:800; color:var(--red-ink);
  background:linear-gradient(135deg,var(--red-1),var(--red-2));
  box-shadow:0 8px 26px rgba(231,71,60,.25);
}
.btn.ghost{background:transparent;color:var(--red-1);border-color:transparent}

/* Badges / tags */
.badge{
  display:inline-block;font-weight:700;font-size:.8rem;
  background:linear-gradient(135deg,var(--red-1),var(--red-3));
  color:var(--red-ink); padding:3px 10px;border-radius:999px
}

/* Filters */
.filters{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 18px}
.filter[aria-pressed="true"]{outline:2px solid var(--red-2)}

/* Lists */
ul.clean{list-style:none;margin:0;padding:0}
ul.clean li{padding:12px 0;border-bottom:1px dashed var(--border)}
.meta{color:var(--muted);font-size:var(--f-sm)}

/* Prosa per lectures llargues (sobre fons clar) */
.prose{
  max-width:76ch; margin:0 auto;
  font:400 1.06rem/1.7 ui-serif, Georgia, Cambria, "Times New Roman", serif;
  color:#222;
}
.prose h1,.prose h2,.prose h3{font-family:inherit;color:#111}
.prose blockquote{border-left:3px solid var(--red-2);margin:0;padding:8px 14px;color:#444;background:#fff}

/* Footer */
footer{border-top:1px solid var(--border);margin-top:48px;padding:26px 0;color:var(--muted);font-size:var(--f-sm);background:transparent}

/* Preferències */
@media (prefers-reduced-motion:reduce){*{transition:none;scroll-behavior:auto}}
@media (prefers-contrast:more){:root{--border:#c9ccd3}}

/* Cite modal */
.cite-modal[hidden]{display:none}
.cite-modal{
  position:fixed;
  inset:0;
  z-index:80;
  display:flex;
  align-items:center;
  justify-content:center;
}
.cite-modal__backdrop{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.4);
}
.cite-modal__dialog{
  position:relative;
  width:min(520px,90vw);
  background:#fff;
  border-radius:var(--radius);
  box-shadow:0 20px 48px rgba(0,0,0,.18);
  padding:22px 24px 24px;
  display:flex;
  flex-direction:column;
  gap:18px;
  z-index:1;
}
.cite-modal__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.cite-modal__header h2{
  margin:0;
  font-size:1.25rem;
}
.cite-modal__close{
  border:none;
  background:transparent;
  font-size:1.5rem;
  line-height:1;
  cursor:pointer;
  color:var(--muted);
}
.cite-modal__close:hover{color:#000}
.cite-modal__list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:16px;
}
.cite-modal__list li{
  display:flex;
  gap:16px;
  align-items:flex-start;
  font-size:var(--f-sm);
}
.cite-modal__label{
  color:var(--muted);
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:.04em;
  min-width:76px;
  text-align:right;
}
.cite-modal__content{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.cite-modal__text{
  margin:0;
  padding:10px 12px;
  background:#f5f6f9;
  border-radius:10px;
  color:var(--text);
  font-size:var(--f-sm);
  line-height:1.5;
  word-break:break-word;
}
.cite-modal__copy{
  align-self:flex-start;
  white-space:nowrap;
  font-size:var(--f-xs);
  padding:7px 12px;
}
@media (max-width:520px){
  .cite-modal__list li{
    flex-direction:column;
    gap:10px;
  }
  .cite-modal__label{
    text-align:left;
    font-size:var(--f-xs);
  }
}
